From 352aadede6887a1165a776be582c0571020caf4e Mon Sep 17 00:00:00 2001
From: Hugo Heuzard <hugo.heuzard@gmail.com>
Date: Thu, 7 May 2020 01:57:59 +0200
Subject: [PATCH] Compiler: bump magic number for 4.11

---
 compiler/lib/instr.ml          | 2 +-
 compiler/lib/magic_number.ml   | 3 +++
 compiler/lib/ocaml_version.ml  | 4 +++-
 compiler/lib/ocaml_version.mli | 1 +
 4 files changed, 8 insertions(+), 2 deletions(-)

diff --git a/compiler/lib/instr.ml b/compiler/lib/instr.ml
index bb109165d9..a8fd5d8413 100644
--- a/compiler/lib/instr.ml
+++ b/compiler/lib/instr.ml
@@ -198,7 +198,7 @@ let ops =
   let if_v407 =
     match Ocaml_version.v with
     | `V4_02 | `V4_03 | `V4_04 | `V4_06 -> fun _ -> K_will_not_happen
-    | `V4_07 | `V4_08 | `V4_09 | `V4_10 -> fun k -> k
+    | `V4_07 | `V4_08 | `V4_09 | `V4_10 | `V4_11 -> fun k -> k
   in
   let instrs =
     [| ACC0, KNullary, "ACC0"
diff --git a/compiler/lib/magic_number.ml b/compiler/lib/magic_number.ml
index 305a60dd67..35dcabd2fc 100644
--- a/compiler/lib/magic_number.ml
+++ b/compiler/lib/magic_number.ml
@@ -72,6 +72,7 @@ let current_exe =
     | `V4_08 -> 25
     | `V4_09 -> 26
     | `V4_10 -> 27
+    | `V4_11 -> 28
   in
   "Caml1999X", v
 
@@ -85,6 +86,7 @@ let current_cmo =
     | `V4_08 -> 25
     | `V4_09 -> 26
     | `V4_10 -> 27
+    | `V4_11 -> 28
   in
   "Caml1999O", v
 
@@ -98,6 +100,7 @@ let current_cma =
     | `V4_08 -> 25
     | `V4_09 -> 26
     | `V4_10 -> 27
+    | `V4_11 -> 28
   in
   "Caml1999A", v
 
diff --git a/compiler/lib/ocaml_version.ml b/compiler/lib/ocaml_version.ml
index a1d741648c..a36369d860 100644
--- a/compiler/lib/ocaml_version.ml
+++ b/compiler/lib/ocaml_version.ml
@@ -55,4 +55,6 @@ let v =
   then `V4_08
   else if compare current [ 4; 10 ] < 0
   then `V4_09
-  else `V4_10
+  else if compare current [ 4; 11 ] < 0
+  then `V4_10
+  else `V4_11
diff --git a/compiler/lib/ocaml_version.mli b/compiler/lib/ocaml_version.mli
index ee720bd345..00d0e35f3f 100644
--- a/compiler/lib/ocaml_version.mli
+++ b/compiler/lib/ocaml_version.mli
@@ -33,4 +33,5 @@ val v :
   | `V4_08 (* OCaml 4.08 *)
   | `V4_09 (* OCaml 4.09 *)
   | `V4_10 (* OCaml 4.10 *)
+  | `V4_11 (* OCaml 4.10 *)
   ]
